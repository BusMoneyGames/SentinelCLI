<!DOCTYPE html>
<html lang="en">

<head>
    {% include "_head_template.html"%}
</head>

<body>
    <div id="wrapper">
        <!-- Navigation -->
        {% include "_navbar_template.html"%}
        <!-- /Navigation -->
        <div id="page-wrapper">
            <!-- /Test Run Overview -->
            {% include "_run_info_row_template.html"%}
            <!-- Header links -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <p>
                                {% for i in data.content.links %}
                                <a href={{i.link}}>
                                    <button type="button" class="btn btn-primary"> {{ i.label }}
                                    </button>
                                </a>
                                {% endfor %}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Header links -->
            <!-- Test output rows -->
            {% for each_client_result in data.client_results %}
            {% set result_index = loop.index0 %}
            <div class="row">
                <!-- Test Result Column -->
                <div class="col-lg-12">
                    <!-- Info Panel -->
                    <div class="panel panel-default">
                        <!-- Test Heading -->
                        <div class="panel-heading">
                            <h4>Test Case: {{each_client_result.name}}</h4>
                        </div>
                        <!-- /.Test Heading -->
                        <!-- Screenshot container -->
                        <div class="col-lg-6">
                            <div class="panel panel-default">

                                <!-- /.panel-heading -->
                                <div class="panel-body">
                                    <!-- Nav tabs -->
                                    <ul class="nav nav-tabs">
                                        <!-- Screenshot headers -->
                                        
                                        
                                        {%for img in each_client_result.images %}
                                            {% set img_index = loop.index0 %}
                                            {% set activeFlag = "" %}
                                                                                            
                                            {% set screenshot_type = each_client_result.type_name[img_index]%}

                                            {% if loop.index0 == 0 %}
                                                {% set activeFlag = "active"%}
                                            {% endif %}

                                        <!--{{screenshot_type}} -->
                                        <li class={{activeFlag}}>
                                            <a href="#{{screenshot_type}}-{{each_client_result.name}}-{{img_index}}" data-toggle="tab">{{screenshot_type}}</a>
                                        </li>

                                        {% endfor %}
                                        <!-- /Screenshot headers -->
                                    </ul>
                                    <!-- Screenshots -->
                                    <div class="tab-content">
                                        {% for img in each_client_result.images %}
                                            {% set img_index = loop.index0 %}
                                            {% set activeFlag = "" %}
                                                                                            
                                            {% set screenshot_type = each_client_result.type_name[img_index] %}

                                            {% if loop.index0 == 0 %}
                                                {% set activeFlag = "in active"%}
                                            {% endif %}

                                        <div class="tab-pane fade {{activeFlag}}" id="{{screenshot_type}}-{{each_client_result.name}}-{{img_index}}">
                                            <h4>{{each_client_result.name}}</h4>
                                            <a href={{img}} target="_blank">
                                                <img class="img-responsive" src="{{img}}" alt={{each_client_result.name}}> </a>
                                        </div>
                                        {% endfor %}
                                        <!-- /Screenshots -->
                                    </div>
                                </div>
                                <!-- /screenshot container -->
                            </div>
                        </div>
                        <!-- /.Screenshot container -->
                        <!-- statistics container -->
                        <div class="col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <ul class="nav nav-tabs">

                                        <li class="active">
                                            <a href="#overview{{each_client_result.name}}-{{loop.index0}}" data-toggle="tab">Overview</a>
                                        </li>

                                        <li>
                                            <a href="#stat_result{{each_client_result.name}}-{{loop.index0}}" data-toggle="tab">GPU Statistics</a>
                                        </li>

                                        <li>
                                            <a href="#texture_statistics{{each_client_result.name}}-{{loop.index0}}" data-toggle="tab">Texture Statistics</a>
                                        </li>

                                        <li>
                                            <a href="#custom_statistics{{each_client_result.name}}-{{loop.index0}}" data-toggle="tab">Custom Statistics</a>
                                        </li>

                                    </ul>
                                </div>

                                <div class="panel-body">
                                    <div class="tab-content">
                                        <div class="tab-pane fade in active" id="overview{{each_client_result.name}}-{{loop.index0}}">
                                            <div class="col-lg-6">
                                                <h4> Overview</h4>
                                                <!-- Overview Container -->
                                                <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-temp">
                                                    <thead>
                                                        <tr>
                                                            <th>Name</th>
                                                            <th>Value</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="odd gradeX">
                                                            <td>
                                                                <small>Frametime</small>
                                                            </td>
                                                            <td>
                                                                <small> {{each_client_result.frame_overview.Milliseconds}} ms </small>
                                                            </td>
                                                        </tr>
                                                        <tr class="odd gradeX">
                                                            <td>
                                                                <small>Triangles</small>
                                                            </td>
                                                            <td>
                                                                <small> {{each_client_result.frame_overview.Triangles}} </small>
                                                            </td>
                                                        </tr>
                                                        <tr class="odd gradeX">
                                                            <td>
                                                                <small>Drawcalls</small>
                                                            </td>
                                                            <td>
                                                                <small> {{each_client_result.frame_overview.Draws}} </small>
                                                            </td>
                                                        </tr>
                                                    </tbody>

                                                </table>
                                            </div>
                                            <!-- /small table container -->

                                            <div class="col-lg-12">
                                                <h4> GPU statistics overview </h4>
                                                <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-{{each_client_result.name}}-{{loop.index0}}">
                                                    <thead>
                                                        <tr>
                                                            <th>Rendering Step</th>
                                                            <th>Duration (ms)</th>
                                                            <th>Triangles</th>
                                                            <th>Draws</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {% for overview_value in each_client_result.gpu_overview %}
                                                        <tr class="odd gradeX">
                                                            {% for stat in overview_value %}
                                                            <td>
                                                                <small> {{stat}} </small>
                                                            </td>
                                                            {% endfor %}
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>

                                                </table>
                                                <script>
                                                    $(document).ready(function () {

                                                        $('#dataTables-{{each_client_result.name}}-{{loop.index0}}').DataTable({
                                                            "lengthMenu": [[15], [15]],
                                                            responsive: true,
                                                            paging: false,
                                                            info: false,
                                                            searching: false
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                        <!-- raw GPU overview -->
                                        <div class="tab-pane fade" id="stat_result{{each_client_result.name}}-{{loop.index0}}">
                                            {% for gpu_data_line in each_client_result.gpu_data %}
                                            <code style="white-space: pre;">{{gpu_data_line}}</code>
                                            <br> {% endfor %}
                                        </div>
                                        <!-- /.raw GPU overview -->

                                        <!--  Texure overview -->
                                        <div class="tab-pane fade" id="texture_statistics{{each_client_result.name}}-{{loop.index0}}">
                                            Not implemented
                                        </div>

                                        <!--  /.Texure overview -->

                                        <!--  Custom overview -->
                                        <div class="tab-pane fade" id="custom_statistics{{each_client_result.name}}-{{loop.index0}}">
                                            Not implemented
                                        </div>

                                        <!--  /.Custom overview -->

                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- /.statistics container -->
                    
                    </div>
                    <!-- /.Info Panel -->
                </div>
                <!-- /.Test Result Column -->
            </div>
            {% endfor %}
            <!-- /Test output rows -->
        </div>
    </div>
    <!-- /#wrapper -->
</body>

</html>